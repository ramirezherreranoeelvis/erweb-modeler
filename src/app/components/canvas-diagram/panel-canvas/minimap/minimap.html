@if (tables().length > 0) {
    <div
        #minimapContainer
        class="absolute bottom-6 right-6 z-30 bg-white/90 dark:bg-slate-800/90 border border-slate-300 dark:border-slate-600 rounded-lg shadow-xl overflow-hidden hidden md:block select-none"
        [style.width.px]="width"
        [style.height.px]="height"
        (pointerdown)="handlePointerDown($event)"
        (pointermove)="handlePointerMove($event)"
        (pointerup)="handlePointerUp($event)"
        (pointerleave)="handlePointerUp($event)"
    >
        <!-- SVG Layer for Relationships -->
        <svg class="absolute top-0 left-0 w-full h-full pointer-events-none opacity-40">
            <g [attr.transform]="transformStr()">
                @for (rel of relPaths(); track rel.id) {
                    <path
                        [attr.d]="rel.d"
                        fill="none"
                        [attr.stroke]="strokeColor()"
                        [attr.stroke-width]="2 / scale()"
                    />
                }
            </g>
        </svg>

        <!-- Tables Preview -->
        <div class="relative w-full h-full opacity-60 pointer-events-none">
            @for (t of tableRects(); track t.id) {
                <div
                    class="absolute bg-slate-300 dark:bg-slate-500 border border-slate-400 dark:border-slate-400 rounded-sm"
                    [style.left.px]="t.x"
                    [style.top.px]="t.y"
                    [style.width.px]="t.w"
                    [style.height.px]="t.h"
                ></div>
            }
        </div>

        <!-- Viewport Indicator -->
        <div
            class="absolute border-2 border-blue-500 bg-blue-500/10 cursor-move"
            [style.left.px]="viewport().x"
            [style.top.px]="viewport().y"
            [style.width.px]="viewport().w"
            [style.height.px]="viewport().h"
            style="transform: translate3d(0, 0, 0)"
        ></div>
    </div>
}
